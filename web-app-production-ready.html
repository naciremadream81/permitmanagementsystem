<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permit Management System - Production Ready</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            display: none;
            font-weight: 500;
        }

        .alert-success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .alert-error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }

        .auth-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 500px;
            margin: 0 auto;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #e5e7eb;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #6b7280;
        }

        .auth-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .main-content {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .user-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .user-info h2 {
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .user-info p {
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        .dashboard {
            padding: 30px;
        }

        .dashboard h3 {
            margin-bottom: 20px;
            color: #374151;
            font-size: 1.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }

        .stat-card h4 {
            color: #6b7280;
            margin-bottom: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
        }

        .county-selector {
            padding: 30px;
            border-top: 1px solid #e5e7eb;
        }

        .county-selector h3 {
            margin-bottom: 20px;
            color: #374151;
        }

        .county-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .checklist-container {
            padding: 30px;
            border-top: 1px solid #e5e7eb;
        }

        .checklist-container h3 {
            margin-bottom: 20px;
            color: #374151;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f9fafb;
        }

        .checklist-item input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .checklist-item label {
            flex: 1;
            cursor: pointer;
        }

        .checklist-item .required {
            color: #dc2626;
            font-weight: 600;
        }

        .file-upload-container {
            padding: 30px;
            border-top: 1px solid #e5e7eb;
        }

        .file-upload-container h3 {
            margin-bottom: 20px;
            color: #374151;
        }

        .file-drop-zone {
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-drop-zone:hover,
        .file-drop-zone.dragover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .file-drop-zone p {
            color: #6b7280;
            margin-bottom: 10px;
        }

        .file-input {
            display: none;
        }

        .selected-files {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .file-item .file-name {
            flex: 1;
        }

        .file-item .remove-file {
            background: #ef4444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .upload-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 20px;
        }

        .upload-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .permit-packages {
            padding: 30px;
            border-top: 1px solid #e5e7eb;
        }

        .permit-packages h3 {
            margin-bottom: 20px;
            color: #374151;
        }

        .permit-list {
            display: grid;
            gap: 15px;
        }

        .permit-item {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .permit-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .permit-item h4 {
            color: #374151;
            margin-bottom: 10px;
        }

        .permit-item p {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .permit-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-approved {
            background: #d1fae5;
            color: #065f46;
        }

        .status-rejected {
            background: #fee2e2;
            color: #991b1b;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .auth-container {
                padding: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏗️ Permit Management System</h1>
            <p>Streamline your building permit process across all 67 Florida counties</p>
        </div>

        <div id="alert" class="alert"></div>

        <!-- Authentication Container -->
        <div id="auth-container" class="auth-container">
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchTab('login')">Login</div>
                <div class="auth-tab" onclick="switchTab('register')">Register</div>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="auth-form active" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn">Login</button>
            </form>

            <!-- Register Form -->
            <form id="register-form" class="auth-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="register-firstName">First Name</label>
                    <input type="text" id="register-firstName" required>
                </div>
                <div class="form-group">
                    <label for="register-lastName">Last Name</label>
                    <input type="text" id="register-lastName" required>
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" required>
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" required minlength="6">
                </div>
                <button type="submit" class="btn">Register</button>
            </form>
        </div>

        <!-- Main Content -->
        <div id="main-content" class="main-content">
            <div class="user-info">
                <h2 id="user-name">Welcome!</h2>
                <p id="user-email"></p>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>

            <div class="dashboard">
                <h3>📊 Dashboard</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>Active Permits</h4>
                        <div class="number" id="active-permits">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Completed</h4>
                        <div class="number" id="completed-permits">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Documents</h4>
                        <div class="number" id="total-documents">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Counties</h4>
                        <div class="number">67</div>
                    </div>
                </div>

                <div class="permit-packages">
                    <h3>📋 Recent Permit Packages</h3>
                    <div id="permits-list" class="permit-list">
                        <p style="text-align: center; color: #6b7280;">No permit packages yet. Create your first one!</p>
                    </div>
                </div>
            </div>

            <div id="county-selector" class="county-selector">
                <h3>🏛️ Select Florida County</h3>
                <select id="county-select" onchange="loadChecklist()">
                    <option value="">Choose a county...</option>
                </select>
            </div>

            <div id="checklist-container" class="checklist-container" style="display: none;">
                <h3>📝 Building Permit Checklist</h3>
                <div id="checklist-items"></div>
            </div>

            <div id="file-upload-container" class="file-upload-container">
                <h3>📁 Document Upload</h3>
                <div class="file-drop-zone" onclick="document.getElementById('file-input').click()" 
                     ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                    <p>📤 Click to select files or drag and drop here</p>
                    <p style="font-size: 0.9rem; color: #9ca3af;">Supports: PDF, DOC, DOCX, JPG, PNG, GIF, DWG, DXF</p>
                </div>
                <input type="file" id="file-input" class="file-input" multiple onchange="handleFileSelect(event)">
                
                <div id="selected-files" class="selected-files"></div>
                
                <button id="upload-btn" class="upload-btn" onclick="uploadFiles()" disabled>
                    Upload Files
                </button>
            </div>
        </div>

        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>

    <script>
        // Global variables
        let authToken = localStorage.getItem('authToken');
        let currentUser = JSON.parse(localStorage.getItem('user') || '{}');
        let selectedFiles = [];
        let currentCounty = null;

        // Florida Counties Data
        const floridaCounties = [
            'Alachua County', 'Baker County', 'Bay County', 'Bradford County', 'Brevard County',
            'Broward County', 'Calhoun County', 'Charlotte County', 'Citrus County', 'Clay County',
            'Collier County', 'Columbia County', 'DeSoto County', 'Dixie County', 'Duval County',
            'Escambia County', 'Flagler County', 'Franklin County', 'Gadsden County', 'Gilchrist County',
            'Glades County', 'Gulf County', 'Hamilton County', 'Hardee County', 'Hendry County',
            'Hernando County', 'Highlands County', 'Hillsborough County', 'Holmes County', 'Indian River County',
            'Jackson County', 'Jefferson County', 'Lafayette County', 'Lake County', 'Lee County',
            'Leon County', 'Levy County', 'Liberty County', 'Madison County', 'Manatee County',
            'Marion County', 'Martin County', 'Miami-Dade County', 'Monroe County', 'Nassau County',
            'Okaloosa County', 'Okeechobee County', 'Orange County', 'Osceola County', 'Palm Beach County',
            'Pasco County', 'Pinellas County', 'Polk County', 'Putnam County', 'Santa Rosa County',
            'Sarasota County', 'Seminole County', 'St. Johns County', 'St. Lucie County', 'Sumter County',
            'Suwannee County', 'Taylor County', 'Union County', 'Volusia County', 'Wakulla County',
            'Walton County', 'Washington County'
        ];

        // Standard Building Permit Checklist
        const standardChecklist = [
            { title: 'Building Permit Application', description: 'Complete and signed building permit application form', required: true },
            { title: 'Site Plan', description: 'Detailed site plan showing property boundaries, setbacks, and proposed construction', required: true },
            { title: 'Construction Plans', description: 'Architectural, structural, electrical, plumbing, and mechanical plans', required: true },
            { title: 'Engineering Calculations', description: 'Structural calculations and load analysis', required: true },
            { title: 'Energy Code Compliance', description: 'Energy efficiency calculations and compliance documentation', required: true },
            { title: 'Flood Zone Documentation', description: 'Flood zone determination and elevation certificates if applicable', required: true },
            { title: 'Environmental Permits', description: 'Environmental permits if construction affects sensitive areas', required: false },
            { title: 'Contractor License', description: 'Copy of contractor license and insurance certificate', required: true },
            { title: 'Property Survey', description: 'Recent property survey showing existing conditions', required: true },
            { title: 'Zoning Compliance', description: 'Zoning compliance verification and variance documentation', required: true },
            { title: 'Impact Fees', description: 'Impact fee calculations and payment receipts', required: true },
            { title: 'Utility Coordination', description: 'Utility company coordination and approval letters', required: false }
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            if (authToken && currentUser.id) {
                showMainContent();
                loadDashboard();
                populateCountySelect();
            }
        });

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelector('.auth-tab:first-child').classList.add('active');
                document.getElementById('login-form').classList.add('active');
            } else {
                document.querySelector('.auth-tab:last-child').classList.add('active');
                document.getElementById('register-form').classList.add('active');
            }
        }

        // Show alert
        function showAlert(message, type = 'success') {
            const alert = document.getElementById('alert');
            alert.textContent = message;
            alert.className = `alert alert-${type}`;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }

        // Show loading
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        // Handle login
        async function handleLogin(event) {
            event.preventDefault();
            showLoading(true);
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            try {
                const response = await fetch('/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    authToken = data.data.token;
                    currentUser = data.data.user;
                    localStorage.setItem('authToken', authToken);
                    localStorage.setItem('user', JSON.stringify(currentUser));
                    
                    showAlert('Login successful!', 'success');
                    showMainContent();
                    loadDashboard();
                    populateCountySelect();
                } else {
                    showAlert(data.error || 'Login failed', 'error');
                }
            } catch (error) {
                console.error('Login error:', error);
                showAlert('Network error. Please try again.', 'error');
            } finally {
                showLoading(false);
            }
        }

        // Handle registration
        async function handleRegister(event) {
            event.preventDefault();
            showLoading(true);
            
            const firstName = document.getElementById('register-firstName').value;
            const lastName = document.getElementById('register-lastName').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            
            try {
                const response = await fetch('/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ firstName, lastName, email, password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showAlert('Registration successful! Please login.', 'success');
                    switchTab('login');
                    // Clear form
                    event.target.reset();
                } else {
                    showAlert(data.error || 'Registration failed', 'error');
                }
            } catch (error) {
                console.error('Registration error:', error);
                showAlert('Network error. Please try again.', 'error');
            } finally {
                showLoading(false);
            }
        }

        // Show main content
        function showMainContent() {
            document.getElementById('auth-container').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            
            // Update user info
            document.getElementById('user-name').textContent = `Welcome, ${currentUser.firstName} ${currentUser.lastName}!`;
            document.getElementById('user-email').textContent = currentUser.email;
        }

        // Load dashboard
        async function loadDashboard() {
            try {
                // Load permits
                const permitsResponse = await fetch('/permits/list', {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                if (permitsResponse.ok) {
                    const permitsData = await permitsResponse.json();
                    updatePermitsList(permitsData.data || []);
                }
                
                // Load documents
                const docsResponse = await fetch('/documents/list', {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                if (docsResponse.ok) {
                    const docsData = await docsResponse.json();
                    updateDashboardStats(docsData.data || []);
                }
                
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }

        // Update permits list
        function updatePermitsList(permits) {
            const permitsList = document.getElementById('permits-list');
            
            if (permits.length === 0) {
                permitsList.innerHTML = '<p style="text-align: center; color: #6b7280;">No permit packages yet. Create your first one!</p>';
                return;
            }
            
            permitsList.innerHTML = permits.map(permit => `
                <div class="permit-item">
                    <h4>${permit.countyName} - ${permit.projectType}</h4>
                    <p>Status: <span class="permit-status status-${permit.status.toLowerCase()}">${permit.status}</span></p>
                    <p>Created: ${new Date(permit.createdAt).toLocaleDateString()}</p>
                </div>
            `).join('');
        }

        // Update dashboard stats
        function updateDashboardStats(documents) {
            document.getElementById('total-documents').textContent = documents.length;
            // You can add more stats here based on your data
        }

        // Populate county select
        function populateCountySelect() {
            const countySelect = document.getElementById('county-select');
            countySelect.innerHTML = '<option value="">Choose a county...</option>';
            
            floridaCounties.forEach(county => {
                const option = document.createElement('option');
                option.value = county;
                option.textContent = county;
                countySelect.appendChild(option);
            });
        }

        // Load checklist
        function loadChecklist() {
            const countySelect = document.getElementById('county-select');
            const selectedCounty = countySelect.value;
            
            if (!selectedCounty) {
                document.getElementById('checklist-container').style.display = 'none';
                return;
            }
            
            currentCounty = selectedCounty;
            document.getElementById('checklist-container').style.display = 'block';
            
            const checklistItems = document.getElementById('checklist-items');
            checklistItems.innerHTML = standardChecklist.map((item, index) => `
                <div class="checklist-item">
                    <input type="checkbox" id="item-${index}" ${item.required ? 'required' : ''}>
                    <label for="item-${index}">
                        ${item.title} ${item.required ? '<span class="required">*</span>' : ''}
                        <br><small style="color: #6b7280;">${item.description}</small>
                    </label>
                </div>
            `).join('');
        }

        // File handling
        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            addFiles(files);
        }

        function handleDrop(event) {
            event.preventDefault();
            const files = Array.from(event.dataTransfer.files);
            addFiles(files);
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }

        function addFiles(files) {
            files.forEach(file => {
                if (!selectedFiles.find(f => f.name === file.name)) {
                    selectedFiles.push(file);
                }
            });
            updateFileList();
        }

        function removeFile(fileName) {
            selectedFiles = selectedFiles.filter(f => f.name !== fileName);
            updateFileList();
        }

        function updateFileList() {
            const fileList = document.getElementById('selected-files');
            const uploadBtn = document.getElementById('upload-btn');
            
            if (selectedFiles.length === 0) {
                fileList.innerHTML = '';
                uploadBtn.disabled = true;
                return;
            }
            
            fileList.innerHTML = selectedFiles.map(file => `
                <div class="file-item">
                    <span class="file-name">${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                    <button class="remove-file" onclick="removeFile('${file.name}')">Remove</button>
                </div>
            `).join('');
            
            uploadBtn.disabled = false;
        }

        // Upload files
        async function uploadFiles() {
            if (selectedFiles.length === 0) {
                showAlert('Please select files to upload', 'error');
                return;
            }
            
            showLoading(true);
            
            try {
                const formData = new FormData();
                selectedFiles.forEach(file => {
                    formData.append('files', file);
                });
                
                const response = await fetch('/documents/upload', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${authToken}` },
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showAlert('Files uploaded successfully!', 'success');
                    selectedFiles = [];
                    updateFileList();
                    loadDashboard(); // Refresh dashboard stats
                } else {
                    showAlert(data.error || 'Upload failed', 'error');
                }
            } catch (error) {
                console.error('Upload error:', error);
                showAlert('Upload failed. Please try again.', 'error');
            } finally {
                showLoading(false);
            }
        }

        // Logout
        function logout() {
            authToken = null;
            currentUser = {};
            localStorage.removeItem('authToken');
            localStorage.removeItem('user');
            
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('auth-container').style.display = 'block';
            
            // Clear forms
            document.getElementById('login-form').reset();
            document.getElementById('register-form').reset();
            
            showAlert('Logged out successfully', 'success');
        }

        // Error handling for network issues
        window.addEventListener('offline', () => {
            showAlert('You are offline. Please check your internet connection.', 'error');
        });

        window.addEventListener('online', () => {
            showAlert('You are back online!', 'success');
        });
    </script>
</body>
</html>
